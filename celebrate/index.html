<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å®Œæˆå°±æ”¾ç‚®ï¼</title>
  <meta name="description" content="è¼¸å…¥ä½ çš„æˆå°±ï¼ŒæŒ‰ä¸‹é€å‡ºï¼Œçµ¦è‡ªå·±ä¸€å€‹å¤§å¤§çš„æ…¶ç¥ã€‚" />
  <style>
    :root{
      --bg:#120a2a;
      --card:#1a1036;
      --text:#f2f2f2;
      --muted:#b7b0c8;
      --line:rgba(255,255,255,.10);
      --btn:#c9b6ff;
      --btnText:#120a2a;
      --radius:18px;
      --pad:22px;
      --measure:62ch;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", sans-serif;
      background: radial-gradient(1000px 500px at 20% 10%, rgba(201,182,255,.18), transparent 60%),
                  radial-gradient(900px 500px at 80% 30%, rgba(255,255,255,.08), transparent 65%),
                  var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .wrap{width:min(920px,100%)}
    .card{
      background:rgba(26,16,54,.92);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:28px;
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
      backdrop-filter: blur(6px);
    }
    h1{
      margin:0 0 6px 0;
      font-size:24px;
      letter-spacing:.5px;
    }
    p{margin:0 0 18px 0;color:var(--muted);line-height:1.6}
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
    }
    @media (max-width:720px){
      .grid{grid-template-columns:1fr}
    }
    label{display:block;font-size:14px;color:var(--muted);margin:10px 0 6px}
    input, textarea{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      color:var(--text);
      outline:none;
    }
    textarea{min-height:88px;resize:vertical}
    .actions{
      display:flex;
      gap:10px;
      margin-top:18px;
      flex-wrap:wrap;
    }
    button{
      cursor:pointer;
      border:0;
      border-radius:999px;
      padding:12px 16px;
      font-weight:700;
      letter-spacing:.3px;
    }
    .primary{
      background:var(--btn);
      color:var(--btnText);
    }
    .ghost{
      background:transparent;
      border:1px solid var(--line);
      color:var(--text);
    }
    .small{font-size:13px;color:var(--muted);margin-top:10px}

    /* result view */
    .result{
      display:none;
      text-align:center;
      padding:34px 18px;
    }
    .big{
      font-size:28px;
      line-height:1.35;
      margin:0 0 10px 0;
    }
    .meta{
      margin:0 auto;
      max-width:var(--measure);
      color:var(--muted);
      line-height:1.8;
      font-size:16px;
    }
    .badge{
      display:inline-block;
      margin-top:16px;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div id="formView">
        <h1>æˆå°±æ”¾ç‚®å°é é¢</h1>
        <p>å¯«ä¸‹ä½ çš„å®Œæˆï¼ŒæŒ‰ä¸‹é€å‡ºï¼Œè®“å®‡å®™çŸ¥é“ä½ å¾ˆæ£’ã€‚</p>

        <div class="grid">
          <div>
            <label for="name">æˆ‘æ˜¯èª°ï¼ˆåå­—ï¼æš±ç¨±ï¼‰</label>
            <input id="name" placeholder="ä¾‹å¦‚ï¼šå–µå–µ" autocomplete="name" />
          </div>
          <div>
            <label for="date">å“ªä¸€å¹´å¹¾æœˆå¹¾è™Ÿ</label>
            <input id="date" type="date" />
          </div>
        </div>

        <label for="done">æˆ‘åšäº†ä»€éº¼</label>
        <textarea id="done" placeholder="ä¾‹å¦‚ï¼šæˆ‘æŠŠç¬¬ä¸€å€‹å°ç¶²é æ”¾ä¸Š GitHub Pagesï¼"></textarea>

        <div class="actions">
          <button class="primary" id="go">é€å‡ºï¼æ”¾ç‚®ï¼</button>
          <button class="ghost" id="demo" type="button">æˆ‘å…ˆçœ‹ç¤ºç¯„</button>
        </div>

        <div class="small">å°æé†’ï¼šéŸ³æ¨‚æœƒåœ¨ä½ æŒ‰ä¸‹æŒ‰éˆ•å¾Œæ‰æœƒæ’­æ”¾ï¼ˆç€è¦½å™¨è¦å‰‡ï¼‰ã€‚</div>
      </div>

      <div class="result" id="resultView" aria-live="polite">
        <div class="big" id="headline"></div>
        <div class="meta" id="detail"></div>
        <div class="badge">ğŸ‰ ä½ çœŸçš„å¾ˆæ£’ï¼</div>
        <div class="actions" style="justify-content:center">
          <button class="primary" id="again">å†æ”¾ä¸€æ¬¡ï¼</button>
          <button class="ghost" id="back">å›å»å†å¯«ä¸€å€‹</button>
        </div>
      </div>
    </div>

    <!-- Optional: put celebrate.mp3 next to this HTML -->
    <audio id="music" preload="auto">
      <source src="./celebrate.mp3" type="audio/mpeg" />
    </audio>

    <!-- Confetti library (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
      const $ = (id) => document.getElementById(id);

      const nameEl = $("name");
      const dateEl = $("date");
      const doneEl = $("done");

      const formView = $("formView");
      const resultView = $("resultView");
      const headline = $("headline");
      const detail = $("detail");

      const music = $("music");

      function fmtDate(v){
        // v is "YYYY-MM-DD"
        if(!v) return "";
        const [y,m,d] = v.split("-").map(Number);
        if(!y || !m || !d) return "";
        return `${y}å¹´${m}æœˆ${d}æ—¥`;
      }

      function playCelebrationSound(){
        // Try mp3 first
        music.currentTime = 0;
        const p = music.play();
        if (p && typeof p.catch === "function") {
          p.catch(() => {
            // fallback: simple beep via WebAudio
            try{
              const ctx = new (window.AudioContext || window.webkitAudioContext)();
              const o = ctx.createOscillator();
              const g = ctx.createGain();
              o.type = "triangle";
              o.frequency.value = 880;
              g.gain.value = 0.06;
              o.connect(g); g.connect(ctx.destination);
              o.start();
              setTimeout(()=>{ o.frequency.value = 988; }, 120);
              setTimeout(()=>{ o.stop(); ctx.close(); }, 260);
            }catch(e){}
          });
        }
      }

      function fireConfetti(){
        const duration = 1100;
        const end = Date.now() + duration;

        (function frame() {
          confetti({ particleCount: 6, spread: 70, startVelocity: 45, origin: { x: 0.2, y: 0.7 } });
          confetti({ particleCount: 6, spread: 70, startVelocity: 45, origin: { x: 0.8, y: 0.7 } });

          if (Date.now() < end) requestAnimationFrame(frame);
        })();

        // final big burst
        setTimeout(()=>confetti({ particleCount: 180, spread: 110, startVelocity: 55, origin: { x: 0.5, y: 0.55 } }), 250);
      }

      function showResult(n, d, what){
        const name = (n || "ä½ ").trim();
        const dateText = fmtDate(d) || "ä»Šå¤©";
        const thing = (what || "å®Œæˆäº†ä¸€ä»¶å¾ˆé‡è¦çš„äº‹").trim();

        headline.textContent = `ğŸ† ${name}ï¼Œæ­å–œä½ ï¼`;
        detail.textContent = `${name}åœ¨${dateText}å®Œæˆäº†ï¼šã€Œ${thing}ã€ã€‚`;

        formView.style.display = "none";
        resultView.style.display = "block";

        playCelebrationSound();
        fireConfetti();
      }

      $("go").addEventListener("click", () => {
        showResult(nameEl.value, dateEl.value, doneEl.value);
      });

      $("demo").addEventListener("click", () => {
        nameEl.value = "å–µå–µ";
        // set today's date by default
        const t = new Date();
        const yyyy = t.getFullYear();
        const mm = String(t.getMonth()+1).padStart(2,"0");
        const dd = String(t.getDate()).padStart(2,"0");
        dateEl.value = `${yyyy}-${mm}-${dd}`;
        doneEl.value = "æˆ‘æŠŠç¬¬ä¸€å€‹æ…¶ç¥å°ç¶²é æ”¾ä¸Š GitHub Pagesï¼";
        showResult(nameEl.value, dateEl.value, doneEl.value);
      });

      $("again").addEventListener("click", () => {
        playCelebrationSound();
        fireConfetti();
      });

      $("back").addEventListener("click", () => {
        resultView.style.display = "none";
        formView.style.display = "block";
      });
    </script>
  </div>
</body>
</html>
